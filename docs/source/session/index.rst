会话管理
=========================

SnbConfig 
------------------------

==================== ====================
key                    含义     
==================== ====================
account                accountId
key                    secretKey
snb_server             API 服务器地址 
snb_port               API 服务器端口 
timeout                HTTP 超时时间 
schema                 API Http Schema 
==================== ====================


token 介绍
-------------------------

token是一串无序加密的字符串，形如:pwQxtqj3Bl1q3ThX3I5rRJyUyQxffWX9。在访问API时，用户需携带该token作为身份凭证。

用户获取token的个数没有限制，但服务器仅为每个用户保存10个有效token，再用户连续申请第11个token时，第一个token开始失效，以此类推。

SDK 中封装了 token 相关的方法，login 方法会直接访问 API 获取一个包含了 token 和过期时间的对象，由SDK自动管理，调用时会优先从本地缓存中获取，本地缓存无可用 token 才会去访问 API，缓存为内存级别，程序退出内存失效。

.. _api-login-label:

登录
------------------------

SDK 定义
~~~~~~~~~~~~~~~~~~~~~~~~

**返回值**

==================== ==================== ================================================================================ ==================== ====================
参数名                  类型                  描述                                                                            是否必须                默认值
==================== ==================== ================================================================================ ==================== ====================
access_token         str                   token                                                                            是                    None
expiry_time          int                   token 过期时间戳                                                                   是                    None
==================== ==================== ================================================================================ ==================== ====================

.. code-block:: python

    def login(self) -> HttpResponse:
        """
        登录
        :return
            {
              "msg": null,
              "result_code": "60000",
              "result_data": {
                "access_token": "OP3DebyK9543c5Pz5wdtoOKa9XcayUWn",
                "expiry_time": 1711451636344
              }
            }
        """

示例
~~~~~~~~~~~~~~~~~~~~~~~~

请参照 :ref:`example-login-label`